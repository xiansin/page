/*!
 * circle.process v0.0.1
 * https://github.com/xiansin/circle.process
 *
 * Copyright (c) 2014-2017 Zhou Jianjia
 * Released under the MIT license
 *
 * Date: 2017-12-19
 */
var CircleProcess=(function(g){var h="0.0.1";var b=180;var i=180;var d=180;var e;var c;var m;var j;var f;var k;var a;var l=function(n){return new l.fn.init(n)};l.fn=l.prototype={circleProcess:h,context:null,option:{},interVal:0,constructor:l,init:function(n){if(typeof n==="undefined"){throw new Error("Unable to get canvas object")}this.context=n.getContext("2d");this.option=this._option();this._getCanvasOption(n);this._getOption();this.process=function(){this.interVal=setInterval(function(){this.run()}.bind(this),20)};this.setOption=function(o){this._setOption(o);this._getOption()}},run:function(){var n=e.process;if(e.percent>100||e.percent<0){clearInterval(this.interVal);alert("Percentage out of range,The correct range of 1 - 100");throw new Error("Percentage out of range,The correct range of 1 - 100")}if(n>=e.percent){n=e.percent;clearInterval(this.interVal)}this._clear();if(c.show){this._backgroundCircle()}if(m.show){this._circleGradient(n)}if(j.show){this._smallCircle(j.radius,"#06a8f3",0)}if(f.show){this._smallCircle(f.radius,"#00f8bb",n)}if(a.show){this._showProcess(n)}this._speed(e.percentCircle.speed)},_clear:function(){this.context.clearRect(0,0,c.roundX*2,c.roundY*2)},_backgroundCircle:function(){this.context.lineWidth=e.lineWidth;this.context.beginPath();this.context.arc(c.roundX,c.roundY,e.radius,c.startAngle,c.endAngle);this.context.strokeStyle=c.color;this.context.stroke();this.context.closePath()},_circleGradient:function(n){this.context.beginPath();this.context.lineWidth=e.lineWidth;this.context.arc(c.roundX,c.roundY,e.radius,c.startAngle,c.startAngle+n/100*i,false);if(m.gradientColorShow){this.context.strokeStyle=this._linearGradient()}else{this.context.strokeStyle=m.color}this.context.lineCap="round";this.context.stroke();this.context.closePath()},_linearGradient:function(){var r=c.roundX-e.radius-this.option.lineWidth;var n=c.roundX+e.radius+this.option.lineWidth;var p=c.roundY;var q=c.roundY;var o=this.context.createLinearGradient(r,p,n,q);o.addColorStop(0,"rgba(255,0,0,0.2)");o.addColorStop(0.2,"rgba(255,0,0,0.4)");o.addColorStop(0.4,"rgba(255,0,0,0.6)");o.addColorStop(0.6,"rgba(255,0,0,0.7)");o.addColorStop(0.8,"rgba(255,0,0,0.9)");o.addColorStop(1,"rgba(255,0,0,1)");return o},_smallCircle:function(o,p,q){var n=Math.cos(2*Math.PI/360*(b+q*d/100))*e.radius+c.roundX;var r=Math.sin(2*Math.PI/360*(b+q*d/100))*e.radius+c.roundY;this.context.beginPath();this.context.arc(n,r,o,0,Math.PI*2);this.context.lineWidth=1;this.context.fillStyle=p;this.context.fill()},_showProcess:function(p){var n=0;var o=e.percent.toString();if(/\./.test(o)&&o.split(".")[1].length>0){n=o.split(".")[1].length<2?1:2}this.context.font=a.fontSize+"px April";this.context.textAlign=a.textAlign;this.context.textBaseline=a.textBaseline;this.context.fillStyle=a.color;this.context.fillText(parseFloat(p).toFixed(n)+"%",c.roundX,c.roundY)},_showProcessFollow:function(){},_speed:function(o){var n=this.option;if(o==="gradient"){if(n.process/n.percent>0.9){n.process+=0.3}else{if(n.process/n.percent>0.8){this.option.process+=0.55}else{if(n.process/n.percent>0.7){n.process+=0.75}else{n.process+=1}}}}else{if(o==="normal"){n.process+=1}else{if(o==="fast"){n.process+=2.5}}}},_getCanvasOption:function(n){this._extend(this.option,{backgroundCircle:{roundX:n.width/2,roundY:n.height/2,startAngle:Math.PI/180*180,endAngle:Math.PI/180*180*2}})},_extend:function(r,s){for(var q in s){if(typeof s[q]==="object"){this._extend(r[q],s[q])}else{if(s.hasOwnProperty(q)&&(!r.hasOwnProperty(q))){r[q]=s[q]}else{if(s.hasOwnProperty(q)&&r.hasOwnProperty(q)){r[q]=s[q]}}}}},_getOption:function(){e=this.option;c=e.backgroundCircle;m=e.percentCircle;j=e.startSmallCircle;f=e.endSmallCircle;k=e.gradient;a=e.processText;i=c.startAngle;if(e.size==="complete"){b=540;i=c.startAngle*2;d=360;this._extend(this.option,{backgroundCircle:{startAngle:Math.PI/180*120,endAngle:Math.PI/180*120*4}})}else{if(e.size==="incomplete"){b=120;i=Math.PI*5/3;d=300;this._extend(this.option,{backgroundCircle:{startAngle:Math.PI/180*120,endAngle:Math.PI/180*420}})}}},_setOption:function(n){this._extend(this.option,n)},_option:function(){return{size:"half",lineWidth:5,radius:100,percent:80,process:0,backgroundCircle:{show:true,color:"#eee",roundX:0,roundY:0,startAngle:0,endAngle:0},percentCircle:{show:true,color:"#f00",speed:"gradient",gradientColorShow:false,gradientColor:"rgba(255.0.0,0.1)"},startSmallCircle:{show:true,color:"#06a8f3",radius:5},endSmallCircle:{show:true,color:"#00f8bb",radius:5},gradient:{color:"rgba(255,0,0,0.1)",size:4},processText:{show:true,fontSize:20,color:"#ccc",follow:false,textAlign:"center",textBaseline:"alphabetic"}}}};l.fn.init.prototype=l.fn;return l})();