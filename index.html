<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<title>视频播放</title>
		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="css/common.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="bootstrap/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var point = "106.727365,26.605983";
		</script>
	</head>

	<body>
		<div class="container-fluid view-video-main">
			<!--问诊介绍-->
			<div class="view-video-intro col-md-4 col-sm-4 col-xs-4 col-lg-4 no-padding">
				<!--问诊介绍 header-->
				<div class="view-video-intro-header">
					<!--问诊介绍 header btn-->
					<div class="small-angle position-absolute-top-right" style="top: 1px;"></div>
					<a class="header-btn col-md-3 col-sm-3 col-xs-3 col-lg-3 no-padding" href="javascript:void(0)">
						<div class="header-btn-text">回到地图大数据</div>
						<img src="images/view-video-intro-btn.png" id="intro_btn"/>
					</a>
					<!--问诊介绍 header middle-->
					<div class="header-center col-md-2 col-sm-2 col-xs-2 col-lg-2 no-padding">
						<div class="header-center-angle position-absolute-top-left"></div>
						<div class="header-center-bg"></div>
						<div class="header-center-angle-1 position-absolute-bottom-left" ></div>
					</div>
					<!--问诊介绍 header right-->
					<div class="header-right col-md-7 col-sm-7 col-xs-7 col-lg-7 no-padding">&nbsp;</div>
				</div>
				<!--问诊介绍 content-->
				<div class="view-video-intro-content">
					<div class="angle position-absolute-top-left position-relative" style="top: 1px;"></div>
					<div class="intro-top"></div>
					<div class="intro-left pull-left"></div>
					<!--网点信息-->
					<div class="branch-info intro-content-width pull-left">
						<p class="no-margin font-s-20">贵阳市 南明区网点</p>
						<p class="word-c-white no-margin font-s-14">2017-11-29 09:21:35</p>
					</div>
					<!--医生信息-->
					<div class="doc-info intro-content-width pull-left font-s-14">
						<p class="no-margin">贵阳互联网医院</p>
						<p class="word-c-white no-margin">小小123医生 主任护师 外科</p>
					</div>
					<!--地图信息-->
					<div class="map-info intro-content-width pull-left" id="map_info"></div>
					<!--医生介绍-->
					<div class="intro-desc intro-content-width pull-left font-s-12">
						毕业于贵阳中医学院中西医临床专业本科，曾于贵州省人民医院临床实习，于二甲医院临床工作2年，擅长老年慢性病如高血压，糖尿病，及妇科常见疾病的诊治。
					</div>
					<div class="angle rotate270 position-absolute-bottom-left"></div>
					<div class="angle rotate180 position-absolute-bottom-right"></div>
				</div>
			</div>
			<!--问诊详情-->
			<div class="view-video-detail col-md-8 col-sm-8 col-xs-8 col-lg-8 no-padding">
				<div class="angle position-absolute-top-left"></div>
				<div class="angle rotate90 position-absolute-top-right"></div>

				<!--问诊详情  header btn-->
				<div class="detail-header">
					<div class="detail-header-text font-s-20">视频播放区</div>
					<img src="images/detail-header-bg-1.png" />
				</div>

				<div class="view-video-detail-bg pull-left"></div>
				<div class="detail-content pull-left">
					<!--医生视频-->
					<video id="doc" class="video-doc" autoplay="" onplay="position()">
						<source src="https://test.guijk.com/downloadvedio/index.php?date=20171129&name=1511918495476824_1" type="video/webm">
					</video>
					<!--用户视频-->
					<video id="user" class="video-user" autoplay>
						<source src="https://test.guijk.com/downloadvedio/index.php?date=20171129&name=1511918495476824_2" type="video/webm">
					</video>
				</div>
				<div class="view-video-detail-bg pull-right"></div>

				<div class="angle rotate270 position-absolute-bottom-left"></div>
				<div class="angle rotate180 position-absolute-bottom-right"></div>
			</div>
		</div>
	</body>
	<script src="http://api.map.baidu.com/api?v=2.0&ak=IiHxNA6cDzhpckH6kLjcXkLC"></script>
	<script type="text/javascript" src="js/echarts.min.js"></script>
<script type="text/javascript" src="js/bmap.min.js"></script>
<script type="text/javascript" src="js/viewInquiryEcharts.js"></script>
	<script type="text/javascript">
	
		changeIntroSize();
		function changeIntroSize(){
			var $introBtn = $("#intro_btn");
			var $introText = $(".header-btn-text");
			var width = $introBtn.width();
			if(width < 163){
				$introText.css("font-size",(width/100 - 0.15)+"em");
			}else{
				$introText.css("font-size","1.5em");
			}
		}
	
		/**
		 * 重新定位 用户视频 保证用户视频贴合医生视频
		 */
		function position() {
			var $video = $('video');
			var $detail = $(".detail-content");
			var $user = $("#user");
			// 视频实际高度和分辨率
			var videoH = $video[0].videoHeight;
			var videoW = $video[0].videoWidth;
			var videoRatio = videoH / videoW;
			// 父类 宽高
			var detailH = $detail.height();
			var detailW = $detail.width();
			// user 初始 left 距离  bottom 距离
			var userL = 19;
			var userB = 18;

			/*
			 * 1.当父级容器的 高宽比 大于视频实际的 高宽比时 这个时候视频 宽度填充满
			 *   高度小于实际高度 那么需要重新计算 用户视频距底部距离
			 * 2.当父级容器的 高宽比 大于视频实际的 高宽比时 这个时候视频 高度填充满
			 *   宽度于实际宽度 那么需要重新计算 用户视频距左边距离
			 */
			if(detailH / detailW > videoRatio) {
				// 实际视频高度
				var realVideoH = detailW * videoRatio;
				// 实际user 距父类左边距离
				var realUserH = (detailH - realVideoH) / 2 + userB;
				$user.css("bottom", realUserH)
					.css("left", userL)
			} else {
				// 实际视频播放宽度
				var realVideoW = detailH / videoRatio;
				// 实际user 距父类左边距离
				var realUserL = (detailW - realVideoW) / 2 + userL;

				$user.css("left", realUserL)
					.css("bottom", userB);
			}
		}
		// 窗口变化
		window.onresize = function() {
			position();
			changeIntroSize();
		};
	</script>

</html>